## –ê—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏. –°–≤—è–∑—å ManyToOne

## –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è @ElementCollection
 –ï—ë –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –æ–±—ä–µ–∫—Ç, —Å –∫–æ—Ç–æ—Ä—ã–º —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–≤—è–∑—å, –Ω–µ –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ
 –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —Ç–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –∑–∞–≤–∏—Å–∏–º–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ 
 —Å–æ–∑–¥–∞—é—Ç—Å—è, –∏–∑–º–µ–Ω—è—é—Ç—Å—è –∏ —É–¥–∞–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–º–µ—Å—Ç–µ —Å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º.

 ## –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è @ManyToOne
 –í –∫–æ–¥–µ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–≤—è–∑–∏ ¬´–º–Ω–æ–≥–∏–µ-–∫-–æ–¥–Ω–æ–º—É¬ª –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é @ManyToOne. –û–Ω–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è 
 –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –¥–æ—á–µ—Ä–Ω–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞. –ï—ë —É–¥–æ–±–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø–æ –≤–Ω–µ—à–Ω–µ–º—É –∫–ª—é—á—É.
```
  class Item {
      @Id
      @GeneratedValue(strategy = GenerationType.IDENTITY)
      private Long id;
  
      @ManyToOne
      @JoinColumn(name = "user_id")
      private User user;
  
      // –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  } 
```
@JoinColumn - —É–∫–∞–∑—ã–≤–∞–µ–º –ø–æ –∫–∞–∫–æ–º—É –ø–æ–ª—é –≤ —Ç–∞–±–ª–∏—Ü–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –±—É–¥—É—Ç –æ–±—ä–µ–¥–µ–Ω–µ–Ω—ã —Ç–∞–±–ª–∏—Ü—ã

<https://thorben-janssen.com/ultimate-guide-association-mappings-jpa-hibernate/>

 ## –†–µ–∂–∏–º –≤—ã–±–æ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö
 –í –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è—Ö –∞—Å—Å–æ—Ü–∏–∞—Ü–∏—è—Ö (@ManyToMany, @ElementCollection –∏ —Ç–¥) –µ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä fetch, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Ç–∏–ø –≤—ã–±–æ—Ä–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
  –î–ª—è —ç—Ç–æ–≥–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è —É–∫–∞–∑—ã–≤–∞—é—Ç –æ–¥–∏–Ω –∏–∑ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è FetchType.
–í—ã–±–æ—Ä–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–≤—É—Ö —Ç–∏–ø–æ–≤:
 - EAGER (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞) ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –≤—ã–≥—Ä—É–∂–µ–Ω—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –æ—Å–Ω–æ–≤–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç—å—é;
 - LAZY (–æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞) ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –≤—ã–≥—Ä—É–∂–µ–Ω—ã —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –æ–Ω–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è. –¢–æ –µ—Å—Ç—å –∫–æ–≥–¥–∞ –≤ –∫–æ–¥–µ –±—É–¥–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ–ª—é, –∫–æ—Ç–æ—Ä–æ–µ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Å–≤—è–∑–∞–Ω–Ω—É—é —Å—É—â–Ω–æ—Å—Ç—å (–∏–ª–∏ –Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—é —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π).
–¢–∏–ø –≤—ã–±–æ—Ä–∫–∏ LAZY –≤ JPA –≤–∫–ª—é—á—ë–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π: @ElementCollection, @ManyToMany –∏ @OneToMany. –£ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π @ManyToOne –∏ @OneToOne –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è EAGER.

```
 @Entity
 @Table(name = "posts")
 public class Post {
     // ...
 
     // –º–µ–Ω—è–µ–º —Ç–∏–ø –≤—ã–±–æ—Ä–∫–∏ —Å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ (EAGER) –Ω–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π (LAZY)
     @ManyToOne(fetch = FetchType.LAZY)
     @JoinColumn(name = "author_id", nullable = false)
     private User author;
 
     // ...
 } 
```

 ## JOIN FETCH 
 –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –≤—ã–±–æ—Ä–∫–∏ (Lazy) –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–∞ n + 1 –∑–∞–ø—Ä–æ—Å–∞, —á—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ Join fetch –≤–Ω—É—Ç—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞. –≠—Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—É—é –≤—ã–±–æ—Ä–∫—É –¥–∞–Ω–Ω—ã—Ö
 
```
 public interface PostRepository extends JpaRepository<Post, Long> {
     @Query(" select p " +
             "from Post p " +
             "JOIN FETCH p.author")  // JOIN FETCH –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—É—é –≤—ã–±–æ—Ä–∫—É
     List<Post> findAllWithAuthors();
 } 
```

üí° –û–±—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ —Ä–∞–±–æ—Ç—ã —Å–æ —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ —Å—É—â–Ω–æ—Å—Ç—è–º–∏
 –î–ª—è –≤—Å–µ—Ö —Å–≤—è–∑–µ–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—ã–±–∏—Ä–∞—Ç—å —Ä–µ–∂–∏–º –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –≤—ã–±–æ—Ä–∫–∏ FetchType.LAZY. –û–Ω –ø–æ–∑–≤–æ–ª–∏—Ç –∏–∑–±–µ–∂–∞—Ç—å –≤—ã–≥—Ä—É–∑–∫–∏ –ª–∏—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –∫–æ–≥–¥–∞ –æ–Ω–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è. –ï—Å–ª–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ –≤—ã–≥—Ä—É–∂–∞—Ç—å —Å—Ä–∞–∑—É, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é JPQL –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è JOIN FETCH.
