https://www.youtube.com/watch?v=hbseyn-CfXY&t=1043s

https://www.performance-lab.ru/press-releases/osnovy-apache-kafka

## Основные понятия (Архитектура kafka)
- Продюсер (producer) — это просто код (или сервис), который отправляет события в Kafka.
- Потребитель (consumer) — это код (скрипт/сервис), который читает события из Kafka.
- Очередь - Специальное место для хранения сообщений, где они держатся до тех пор, пока кто-то их не заберет. Очередь работает по принципу «первым пришел — первым ушел» (FIFO). Как только сообщение забрано, оно удаляется и восстановить его уже нельзя.
- Топик — это тип потока данных, напоминающий очередь: он также принимает и отправляет сообщения, но имеет несколько особенностей, таких как:
  1. Разделы (или партиции) — это части топика, на которые он разбивается
  Простой пример: представьте организацию папок. Топик — это как папка, а партиции — это папки внутри неё, в которых и хранятся данные.
  2. Ключ сообщения - Используется для распределения сообщений по партициям. Сообщения с одинаковым ключом всегда попадают в одну и ту же партицию. Если же ключ не указан, то сообщения будут равномерно распределяться по всем партициям. Это значит, что порядок доставки сообщений внутри партиций не гарантируется.

<img width="1024" height="396" alt="image" src="https://github.com/user-attachments/assets/68d7a740-8f44-4072-b71c-f78fb505f2f3" />

Zookeeper - отдельный кластер, который отвечает за харнение мета информации, про топики, авторизационные данные, а также поддерживает кластер в рабочем состоянии.

<img width="705" height="491" alt="image" src="https://github.com/user-attachments/assets/c11a9ce7-f069-4e9d-8e9c-322e16efba4c" />

**Offset — метка «где я остановился»**
Offset (смещение) — это просто номер сообщения внутри partition (раздела).

лаг - расстояние между end-offset и текущей позицией консюмера
## Семантика сообщений
<img width="379" height="224" alt="image" src="https://github.com/user-attachments/assets/d6a119ac-cfd2-4966-b5c7-f3bf6e713e8a" />


#### AT LEAST ONE - Сообщение будет доставлено минимум один раз

Идемпотентый продюсер - подразумевается, что в нашем консюмере есть логика, которая позволяет работать с дубликатом сообщений так, как будто они приходят в единственном дубликате

``enable.idempotence = true``

#### AT MOSTE ONE - допускаются потери
Наиболее из быстрых вариантов доставки

#### EXCTLY ONE - строго один раз
